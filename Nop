local redzlib = loadstring(game:HttpGet("https://raw.githubusercontent.com/tbao143/Library-ui/refs/heads/main/Redzhubui"))()

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TextChatService = game:GetService("TextChatService")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

getgenv().ScriptID = "DRIPCLIENTADM" 
local allowedUsers = {
    ["magnusfxp"] = true,
}

local selectedPlayer = nil
local isESPEnabled = false
local JailObjects = {}
local FrozenPlayers = {}
local sharinganRunning = false
local ESPObjects = {}

local function CreateESPForPlayer(player)
    local character = player.Character
    if character and character:FindFirstChild("Head") and not ESPObjects[player] then
        local billboard = Instance.new("BillboardGui")
        billboard.Name = "ESPTag"
        billboard.Size = UDim2.new(0, 100, 0, 30)
        billboard.Adornee = character.Head
        billboard.AlwaysOnTop = true
        billboard.StudsOffset = Vector3.new(0, 2, 0)
        billboard.Parent = character

        local text = Instance.new("TextLabel")
        text.Size = UDim2.new(1, 0, 1, 0)
        text.BackgroundTransparency = 1
        text.Text = player.Name
        text.TextColor3 = Color3.fromRGB(255, 0, 0)
        text.TextScaled = true
        text.Font = Enum.Font.SourceSansBold
        text.Parent = billboard

        ESPObjects[player] = billboard
    end
end

local function RemoveESPForPlayer(player)
    if ESPObjects[player] then
        ESPObjects[player]:Destroy()
        ESPObjects[player] = nil
    end
end

local function UpdateESP()
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer then
            local hasSameScript = false
            pcall(function()
                local gui = plr:FindFirstChild("PlayerGui")
                hasSameScript = gui and gui:FindFirstChild("AdminPanelGUI") ~= nil
            end)

            if hasSameScript and isESPEnabled then
                CreateESPForPlayer(plr)
            else
                RemoveESPForPlayer(plr)
            end
        end
    end
end

function ExecuteSharingan()
    if sharinganRunning then
        return
    end
    
    sharinganRunning = true
    
    local Sound = Instance.new("Sound",game:GetService("SoundService"))
    Sound.SoundId = "rbxassetid://1592708450"
    Sound:Play()
    local Intro = Instance.new("ScreenGui")
    local Logo = Instance.new("ImageLabel")
    local Circle = Instance.new("UICorner")

    Intro.Name = "Intro"
    Intro.Parent = LocalPlayer:WaitForChild("PlayerGui")
    Intro.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    Logo.Name = "Logo"
    Logo.Parent = Intro
    Logo.AnchorPoint = Vector2.new(0.5, 0.5)
    Logo.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Logo.BackgroundTransparency = 1.000
    Logo.BorderColor3 = Color3.fromRGB(0, 0, 0)
    Logo.BorderSizePixel = 0
    Logo.Position = UDim2.new(0.5, 0, 0.5, 0)
    Logo.Size = UDim2.new(0, 0, 0, 0)
    Logo.Image = "rbxassetid://114416257899946"
    Logo.ImageTransparency = 0
    Logo.ScaleType = Enum.ScaleType.Crop

    Circle.CornerRadius = UDim.new(0.5, 0)
    Circle.Name = "Circle"
    Circle.Parent = Logo

    local tweenInfo = TweenInfo.new(1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

    local sizeTween = TweenService:Create(Logo, tweenInfo, {Size = UDim2.new(0, 400, 0, 400)})
    local rotationTween = TweenService:Create(Logo, tweenInfo, {Rotation = 360})

    sizeTween:Play()
    rotationTween:Play()

    task.wait(3) 

    Logo:TweenSizeAndPosition(
        UDim2.new(0, 0, 0, 0), 
        UDim2.new(0.5, 0, 0.5, 0), 
        Enum.EasingDirection.Out,
        Enum.EasingStyle.Quad, 2,
        true,
        function()
            Intro:Destroy()
            sharinganRunning = false
        end
    )
end

function CreateJail(player, fromBroadcast)
    if JailObjects[player] then return end
    
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        local HRP = character.HumanoidRootPart
        
        local cageSize = Vector3.new(10, 10, 10)
        local wallThickness = 0.5
        local transparency = 0.3
        local cageColor = Color3.fromRGB(75, 0, 130)

        local cageModel = Instance.new("Model")
        cageModel.Name = "JaulaDeAdmin_" .. player.Name
        cageModel.Parent = workspace

        local function createWall(size, positionOffset)
            local wall = Instance.new("Part")
            wall.Size = size
            wall.Anchored = true
            wall.CanCollide = true
            wall.Transparency = transparency
            wall.Color = cageColor
            wall.Material = Enum.Material.ForceField
            wall.CFrame = HRP.CFrame * positionOffset
            wall.Parent = cageModel
            
            local stroke = Instance.new("SelectionBox")
            stroke.Color3 = Color3.fromRGB(147, 112, 219)
            stroke.LineThickness = 0.2
            stroke.Transparency = 0.5
            stroke.Adornee = wall
            stroke.Parent = wall
        end

        createWall(Vector3.new(cageSize.X, wallThickness, cageSize.Z), CFrame.new(0, -cageSize.Y/2, 0))
        createWall(Vector3.new(cageSize.X, wallThickness, cageSize.Z), CFrame.new(0, cageSize.Y/2, 0))
        createWall(Vector3.new(cageSize.X, cageSize.Y, wallThickness), CFrame.new(0, 0, -cageSize.Z/2))
        createWall(Vector3.new(cageSize.X, cageSize.Y, wallThickness), CFrame.new(0, 0, cageSize.Z/2))
        createWall(Vector3.new(wallThickness, cageSize.Y, cageSize.Z), CFrame.new(cageSize.X/2, 0, 0))
        createWall(Vector3.new(wallThickness, cageSize.Y, cageSize.Z), CFrame.new(-cageSize.X/2, 0, 0))

        JailObjects[player] = cageModel
        
        spawn(function()
            while JailObjects[player] and player.Parent do
                task.wait(0.5)
                if character and character:FindFirstChild("HumanoidRootPart") then
                    local currentHRP = character.HumanoidRootPart
                    local distance = (currentHRP.Position - HRP.Position).Magnitude
                    if distance > 8 then
                        currentHRP.CFrame = HRP.CFrame
                    end
                end
            end
        end)
    end
end

function RemoveJail(player, fromBroadcast)
    if JailObjects[player] then
        JailObjects[player]:Destroy()
        JailObjects[player] = nil
    end
end

function FreezePlayer(player, fromBroadcast)
    if FrozenPlayers[player] then return end
    
    local character = player.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = 0
            humanoid.JumpPower = 0
            humanoid.JumpHeight = 0
        end

        for _, part in pairs(character:GetChildren()) do
            if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                part.Anchored = true
            end
        end
        
        local HRP = character:FindFirstChild("HumanoidRootPart")
        if HRP then
            HRP.Anchored = true
        end
        
        FrozenPlayers[player] = {
            originalWalkSpeed = humanoid and humanoid.WalkSpeed or 16,
            originalJumpPower = humanoid and humanoid.JumpPower or 50,
            originalJumpHeight = humanoid and humanoid.JumpHeight or 7.2,
            humanoid = humanoid,
            hrp = HRP,
            character = character
        }
        
        local iceEffect = Instance.new("Part")
        iceEffect.Name = "IceEffect_" .. player.Name
        iceEffect.Size = character:GetExtentsSize() + Vector3.new(1, 1, 1)
        iceEffect.CFrame = HRP.CFrame
        iceEffect.Anchored = true
        iceEffect.CanCollide = false
        iceEffect.Transparency = 0.5
        iceEffect.Color = Color3.fromRGB(173, 216, 230)
        iceEffect.Material = Enum.Material.Ice
        iceEffect.Parent = workspace
        
        FrozenPlayers[player].iceEffect = iceEffect
        
        spawn(function()
            while FrozenPlayers[player] and player.Parent do
                task.wait(0.1)
                local char = player.Character
                if char then
                    local hum = char:FindFirstChildOfClass("Humanoid")
                    if hum then
                        hum.WalkSpeed = 0
                        hum.JumpPower = 0
                        hum.JumpHeight = 0
                    end
                    
                    for _, part in pairs(char:GetChildren()) do
                        if part:IsA("BasePart") then
                            part.Anchored = true
                        end
                    end
                end
            end
        end)
    end
end

function UnfreezePlayer(player, fromBroadcast)
    if FrozenPlayers[player] then
        local data = FrozenPlayers[player]
        
        if data.humanoid and data.humanoid.Parent then
            data.humanoid.WalkSpeed = data.originalWalkSpeed or 16
            data.humanoid.JumpPower = data.originalJumpPower or 50
            data.humanoid.JumpHeight = data.originalJumpHeight or 7.2
        end
        
        if data.character and data.character.Parent then
            for _, part in pairs(data.character:GetChildren()) do
                if part:IsA("BasePart") then
                    part.Anchored = false
                end
            end
        end
        
        if data.iceEffect then
            data.iceEffect:Destroy()
        end
        
        FrozenPlayers[player] = nil
    end
end

RunService.Heartbeat:Connect(function()
    if isESPEnabled then
        UpdateESP()
    end
end)

if allowedUsers[LocalPlayer.Name] then
    local Window = redzlib:MakeWindow({
        Title = "Painel de Admin",
        SubTitle = "Sistema de Administração",
        SaveFolder = "AdminPanel_RedzLib"
    })

    local AdminTab = Window:MakeTab({"Admin", "shield"})

    AdminTab:AddSection({"Seleção de Jogador"})

    local playerOptions = {}
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            table.insert(playerOptions, player.Name)
        end
    end

    local PlayerDropdown = AdminTab:AddDropdown({
        Name = "Selecionar Jogador",
        Default = "Nenhum",
        Options = playerOptions,
        Callback = function(Value)
            for _, player in ipairs(Players:GetPlayers()) do
                if player.Name == Value and player ~= LocalPlayer then
                    selectedPlayer = player
                    break
                end
            end
        end    
    })

    local function updatePlayerList()
        local playerNames = {}
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer then
                table.insert(playerNames, player.Name)
            end
        end
        PlayerDropdown:Refresh(playerNames, "Nenhum")
    end

    Players.PlayerAdded:Connect(updatePlayerList)
    Players.PlayerRemoving:Connect(updatePlayerList)

    AdminTab:AddSection({"Comandos"})

    AdminTab:AddButton({
        "Puxar Jogador", 
        function()
            if selectedPlayer then
                TextChatService.TextChannels.RBXGeneral:SendAsync("/bring " .. selectedPlayer.Name)
            end
        end
    })

    AdminTab:AddButton({
        "Matar Jogador", 
        function()
            if selectedPlayer then
                TextChatService.TextChannels.RBXGeneral:SendAsync("/kill " .. selectedPlayer.Name)
            end
        end
    })

    AdminTab:AddButton({
        "Expulsar Jogador", 
        function()
            if selectedPlayer then
                TextChatService.TextChannels.RBXGeneral:SendAsync("/kick " .. selectedPlayer.Name)
            end
        end
    })

    AdminTab:AddButton({
        "Prender Jogador", 
        function()
            if selectedPlayer then
                TextChatService.TextChannels.RBXGeneral:SendAsync("/jail " .. selectedPlayer.Name)
            end
        end
    })

    AdminTab:AddButton({
        "Soltar Jogador", 
        function()
            if selectedPlayer then
                TextChatService.TextChannels.RBXGeneral:SendAsync("/unjail " .. selectedPlayer.Name)
            end
        end
    })

    AdminTab:AddButton({
        "Congelar Jogador", 
        function()
            if selectedPlayer then
                TextChatService.TextChannels.RBXGeneral:SendAsync("/freeze " .. selectedPlayer.Name)
            end
        end
    })

    AdminTab:AddButton({
        "Descongelar Jogador", 
        function()
            if selectedPlayer then
                TextChatService.TextChannels.RBXGeneral:SendAsync("/unfreeze " .. selectedPlayer.Name)
            end
        end
    })

    AdminTab:AddButton({
        "Sharingan", 
        function()
            TextChatService.TextChannels.RBXGeneral:SendAsync("/sharingan")
        end
    })

    AdminTab:AddSection({"ESP"})

    AdminTab:AddToggle({
        Name = "ESP Administradores",
        Default = false,
        Callback = function(Value)
            isESPEnabled = Value
            if not isESPEnabled then
                for _, obj in pairs(ESPObjects) do
                    obj:Destroy()
                end
                ESPObjects = {}
            end
        end    
    })
end

TextChatService.TextChannels.RBXGeneral.MessageReceived:Connect(function(message)
    local text = message.Text:lower()
    local sender = message.TextSource and Players:GetPlayerByUserId(message.TextSource.UserId)

    if not sender or not allowedUsers[sender.Name] then return end

    local function findTarget(name)
        for _, player in ipairs(Players:GetPlayers()) do
            if player.Name:lower():sub(1, #name) == name then
                return player
            end
        end
    end

    local args = {}
    for word in text:gmatch("%S+") do
        table.insert(args, word)
    end

    local cmd = args[1]
    local target = args[2] and findTarget(args[2])

    if cmd == "/kill" and target and target == LocalPlayer then
        local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid")
        if hum then hum.Health = 0 end
    elseif cmd == "/kick" and target and target == LocalPlayer then
        LocalPlayer:Kick("Você foi expulso pelo painel de admin.")
    elseif cmd == "/bring" and target and target == LocalPlayer then
        local targetRoot = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        local senderRoot = sender.Character and sender.Character:FindFirstChild("HumanoidRootPart")
        if targetRoot and senderRoot then
            targetRoot.CFrame = senderRoot.CFrame + Vector3.new(2, 0, 0)
        end
    elseif cmd == "/jail" and target and target == LocalPlayer then
        CreateJail(LocalPlayer, true)
    elseif cmd == "/unjail" and target and target == LocalPlayer then
        RemoveJail(LocalPlayer, true)
    elseif cmd == "/freeze" and target and target == LocalPlayer then
        FreezePlayer(LocalPlayer, true)
    elseif cmd == "/unfreeze" and target and target == LocalPlayer then
        UnfreezePlayer(LocalPlayer, true)
    elseif cmd == "/sharingan" and sender == LocalPlayer then
        ExecuteSharingan()
    end
end)
