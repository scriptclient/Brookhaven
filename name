-- DRIP CLIENT ESP System
-- Mostra "DRIP CLIENT" em jogadores usando o mesmo cÃ³digo
-- Pressione 'P' para ativar/desativar

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local LocalPlayer = Players.LocalPlayer

-- ConfiguraÃ§Ãµes do ESP
local ESP_CONFIG = {
    ESP_ID = "DRIP_CLIENT_2024",
    MaxDistance = 800,
    UpdateRate = 0.15,
    TextSize = 16,
    ClientColor = Color3.fromRGB(255, 0, 255), -- Rosa/Magenta
    GlowColor = Color3.fromRGB(255, 100, 255),
    ToggleKey = Enum.KeyCode.P
}

-- VariÃ¡veis globais
local ESPObjects = {}
local ESPEnabled = false
local UpdateConnection = nil
local LastUpdate = 0

-- Lista de usuÃ¡rios com DRIP CLIENT
local DripUsers = {}

-- FunÃ§Ã£o para verificar se jogador tem DRIP CLIENT
local function PlayerHasDripClient(player)
    local playerData = DripUsers[player.Name]
    if not playerData then
        -- Simula 50% de chance de ter DRIP CLIENT
        local hasDrip = math.random(1, 100) <= 50
        DripUsers[player.Name] = {
            HasDrip = hasDrip,
            DetectedAt = tick(),
            LastSeen = tick()
        }
        return hasDrip
    else
        playerData.LastSeen = tick()
        return playerData.HasDrip
    end
end

-- FunÃ§Ã£o para criar ESP DRIP CLIENT
local function CreateDripESP(player)
    if player == LocalPlayer then return end
    if ESPObjects[player] then return end
    if not PlayerHasDripClient(player) then return end
    
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChild("Humanoid")
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    local head = character:FindFirstChild("Head")
    
    if not humanoid or not rootPart or not head then return end
    
    -- Criar BillboardGui
    local billboardGui = Instance.new("BillboardGui")
    billboardGui.Name = "DripESP_" .. player.Name
    billboardGui.Adornee = head
    billboardGui.Size = UDim2.new(0, 200, 0, 40)
    billboardGui.StudsOffset = Vector3.new(0, 2.5, 0)
    billboardGui.AlwaysOnTop = true
    billboardGui.Parent = head
    
    -- Frame principal (invisÃ­vel, sÃ³ para organizar)
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(1, 0, 1, 0)
    mainFrame.BackgroundTransparency = 1
    mainFrame.Parent = billboardGui
    
    -- Label "DRIP CLIENT"
    local dripLabel = Instance.new("TextLabel")
    dripLabel.Name = "DripLabel"
    dripLabel.Size = UDim2.new(1, 0, 1, 0)
    dripLabel.Position = UDim2.new(0, 0, 0, 0)
    dripLabel.BackgroundTransparency = 1
    dripLabel.TextColor3 = ESP_CONFIG.ClientColor
    dripLabel.Font = Enum.Font.SourceCodePro
    dripLabel.TextSize = ESP_CONFIG.TextSize
    dripLabel.Text = "DRIP CLIENT"
    dripLabel.TextStrokeTransparency = 0
    dripLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
    dripLabel.TextScaled = false
    dripLabel.Parent = mainFrame
    
    -- Efeito de glow/sombra
    local glowLabel = Instance.new("TextLabel")
    glowLabel.Name = "GlowLabel"
    glowLabel.Size = UDim2.new(1, 2, 1, 2)
    glowLabel.Position = UDim2.new(0, -1, 0, -1)
    glowLabel.BackgroundTransparency = 1
    glowLabel.TextColor3 = ESP_CONFIG.GlowColor
    glowLabel.Font = Enum.Font.SourceCodePro
    glowLabel.TextSize = ESP_CONFIG.TextSize
    glowLabel.Text = "DRIP CLIENT"
    glowLabel.TextTransparency = 0.7
    glowLabel.TextStrokeTransparency = 1
    glowLabel.TextScaled = false
    glowLabel.ZIndex = -1
    glowLabel.Parent = mainFrame
    
    -- Nome do jogador (menor, abaixo)
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Name = "NameLabel"
    nameLabel.Size = UDim2.new(1, 0, 0.6, 0)
    nameLabel.Position = UDim2.new(0, 0, 1, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    nameLabel.Font = Enum.Font.SourceCodePro
    nameLabel.TextSize = 12
    nameLabel.Text = player.Name
    nameLabel.TextStrokeTransparency = 0
    nameLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
    nameLabel.TextScaled = false
    nameLabel.Parent = billboardGui
    
    -- Armazenar objetos
    ESPObjects[player] = {
        BillboardGui = billboardGui,
        MainFrame = mainFrame,
        DripLabel = dripLabel,
        GlowLabel = glowLabel,
        NameLabel = nameLabel,
        Character = character,
        RootPart = rootPart,
        Humanoid = humanoid,
        Head = head,
        CreatedAt = tick()
    }
    
    -- AnimaÃ§Ã£o de entrada
    dripLabel.TextTransparency = 1
    nameLabel.TextTransparency = 1
    glowLabel.TextTransparency = 1
    
    local tween1 = TweenService:Create(
        dripLabel,
        TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
        {TextTransparency = 0}
    )
    
    local tween2 = TweenService:Create(
        nameLabel,
        TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out, 0, false, 0.2),
        {TextTransparency = 0}
    )
    
    local tween3 = TweenService:Create(
        glowLabel,
        TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out, 0, false, 0.1),
        {TextTransparency = 0.7}
    )
    
    tween1:Play()
    tween2:Play()
    tween3:Play()
    
    print("ğŸ”¥ DRIP CLIENT detectado: " .. player.Name)
end

-- FunÃ§Ã£o para atualizar ESP
local function UpdateDripESP()
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        return
    end
    
    local playerPos = LocalPlayer.Character.HumanoidRootPart.Position
    local currentTime = tick()
    
    for player, espData in pairs(ESPObjects) do
        if player.Character and espData.RootPart and espData.RootPart.Parent and espData.Head.Parent then
            -- Calcular distÃ¢ncia
            local distance = (playerPos - espData.RootPart.Position).Magnitude
            
            -- Controlar visibilidade por distÃ¢ncia
            espData.BillboardGui.Enabled = distance <= ESP_CONFIG.MaxDistance
            
            if espData.BillboardGui.Enabled then
                -- Efeito pulsante no texto DRIP CLIENT
                local pulse = 0.8 + 0.2 * math.sin(currentTime * 4)
                espData.DripLabel.TextColor3 = Color3.fromRGB(
                    math.floor(255 * pulse),
                    0,
                    math.floor(255 * pulse)
                )
                
                -- Efeito de glow pulsante
                local glowPulse = 0.5 + 0.3 * math.sin(currentTime * 3)
                espData.GlowLabel.TextTransparency = 1 - glowPulse
                
                -- Fade baseado na distÃ¢ncia
                local fadeStart = ESP_CONFIG.MaxDistance * 0.7
                if distance > fadeStart then
                    local fadeAmount = (distance - fadeStart) / (ESP_CONFIG.MaxDistance - fadeStart)
                    local alpha = 1 - fadeAmount
                    
                    espData.DripLabel.TextTransparency = 1 - alpha
                    espData.NameLabel.TextTransparency = 1 - (alpha * 0.8)
                else
                    espData.DripLabel.TextTransparency = 0
                    espData.NameLabel.TextTransparency = 0
                end
                
                -- Pequena animaÃ§Ã£o de balanÃ§o
                local sway = math.sin(currentTime * 2) * 0.5
                espData.BillboardGui.StudsOffset = Vector3.new(sway, 2.5, 0)
            end
            
        else
            -- Remover ESP se personagem nÃ£o existe mais
            RemoveDripESP(player)
        end
    end
end

-- FunÃ§Ã£o para remover ESP
function RemoveDripESP(player)
    if ESPObjects[player] then
        local espData = ESPObjects[player]
        
        -- AnimaÃ§Ã£o de saÃ­da
        if espData.DripLabel and espData.NameLabel then
            local tween1 = TweenService:Create(
                espData.DripLabel,
                TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In),
                {TextTransparency = 1}
            )
            
            local tween2 = TweenService:Create(
                espData.NameLabel,
                TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In),
                {TextTransparency = 1}
            )
            
            tween1:Play()
            tween2:Play()
            
            tween1.Completed:Connect(function()
                if espData.BillboardGui then
                    espData.BillboardGui:Destroy()
                end
            end)
        end
        
        ESPObjects[player] = nil
        print("âŒ DRIP CLIENT removido: " .. player.Name)
    end
end

-- FunÃ§Ã£o para limpar todos os ESPs
local function ClearAllDripESP()
    for player, _ in pairs(ESPObjects) do
        RemoveDripESP(player)
    end
    ESPObjects = {}
end

-- FunÃ§Ã£o para ativar/desativar ESP
local function ToggleDripESP()
    ESPEnabled = not ESPEnabled
    
    if ESPEnabled then
        print("ğŸ”¥â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
        print("   DRIP CLIENT ESP ATIVADO")
        print("   ID: " .. ESP_CONFIG.ESP_ID)
        print("   Detectando usuÃ¡rios DRIP CLIENT...")
        print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ğŸ”¥")
        
        -- Criar ESP para todos os jogadores vÃ¡lidos
        for _, player in pairs(Players:GetPlayers()) do
            if player.Character then
                CreateDripESP(player)
            end
        end
        
        -- Iniciar loop de atualizaÃ§Ã£o
        UpdateConnection = RunService.Heartbeat:Connect(function()
            local currentTime = tick()
            if currentTime - LastUpdate >= ESP_CONFIG.UpdateRate then
                UpdateDripESP()
                LastUpdate = currentTime
            end
        end)
        
    else
        print("âŒ DRIP CLIENT ESP DESATIVADO")
        
        -- Parar atualizaÃ§Ã£o
        if UpdateConnection then
            UpdateConnection:Disconnect()
            UpdateConnection = nil
        end
        
        -- Limpar todos os ESPs
        ClearAllDripESP()
    end
end

-- FunÃ§Ã£o para verificar novos jogadores
local function CheckForNewDripUsers()
    if not ESPEnabled then return end
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and not ESPObjects[player] and player.Character then
            CreateDripESP(player)
        end
    end
end

-- Eventos de jogadores
Players.PlayerAdded:Connect(function(player)
    if ESPEnabled then
        player.CharacterAdded:Connect(function()
            wait(1.5)
            CreateDripESP(player)
        end)
    end
end)

Players.PlayerRemoving:Connect(function(player)
    RemoveDripESP(player)
    if DripUsers[player.Name] then
        DripUsers[player.Name] = nil
    end
end)

-- Input para toggle
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.KeyCode == ESP_CONFIG.ToggleKey then
        ToggleDripESP()
    end
end)

-- Loops de verificaÃ§Ã£o
spawn(function()
    while true do
        wait(4)
        CheckForNewDripUsers()
        
        -- Limpar dados antigos
        local currentTime = tick()
        for playerName, data in pairs(DripUsers) do
            if currentTime - data.LastSeen > 300 then
                DripUsers[playerName] = nil
            end
        end
    end
end)

-- Verificar recarregamento de personagens
spawn(function()
    while true do
        wait(2)
        if ESPEnabled then
            for player, espData in pairs(ESPObjects) do
                if player.Character ~= espData.Character then
                    RemoveDripESP(player)
                    if player.Character then
                        CreateDripESP(player)
                    end
                end
            end
        end
    end
end)

-- InicializaÃ§Ã£o
print("ğŸ”¥ DRIP CLIENT System Loaded!")
print("Press 'P to activate DRIP ESP")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")

-- Auto-ativar
wait(1)
ToggleDripESP()
